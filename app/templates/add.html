{% extends "base.html" %}
{% block title %}Add Transaction{% endblock %}
{% block content %}

<section class="card">
  <h3>Add Transaction</h3>
  {% with msgs = get_flashed_messages(with_categories=true) %}
    {% if msgs %}
      <div class="flash">
        {% for cat, msg in msgs %}
          <div class="flash-{{ cat }}">{{ msg }}</div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <form method="post" class="form">
    <div class="row">
      <label for="date">Date</label>
      <input id="date" name="date" type="date" required />
    </div>
    <div class="row">
      <label for="amount">Amount</label>
      <input id="amount" name="amount" type="number" step="0.01" min="0" required />
    </div>
    <div class="row">
      <label for="merchant">Merchant</label>
      <input id="merchant" name="merchant" type="text" placeholder="e.g., Starbucks" />
    </div>
    <div class="row">
      <label for="category_id">Category</label>
      <select id="category_id" name="category_id">
        <option value="">(Auto by merchant)</option>
        {% for c in categories %}
          <option value="{{ c.id }}">{{ c.name }}{% if c.type=='income' %} (income){% endif %}</option>
        {% endfor %}
      </select>
    </div>
    <div class="row">
      <label for="notes">Notes</label>
      <input id="notes" name="notes" type="text" />
    </div>
    <div class="actions">
      <button type="submit">Save</button>
      <a class="btn-secondary" href="{{ url_for('web.dashboard') }}">Back</a>
    </div>
  </form>
</section>

{% endblock %}
